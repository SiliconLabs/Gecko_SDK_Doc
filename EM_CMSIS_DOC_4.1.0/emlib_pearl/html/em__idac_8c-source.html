<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Silicon Labs EFM32 emlib Peripheral Library: release/EM_CMSIS_P2_4.1.0/emlib/src/em_idac.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_99634199317e4752b1934502e0d836c4.html">release</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_c2847eca720f36b245c7e49c89b00fa8.html">EM_CMSIS_P2_4.1.0</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_2958f7269989594a6ea16f16545d5478.html">emlib</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_3fde68d3237b7ed6c4f5d17987956e29.html">src</a></div>
<h1>em_idac.c</h1><a href="em__idac_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************/</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="em__idac_8h.html">em_idac.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#if defined(IDAC_COUNT) &amp;&amp; (IDAC_COUNT &gt; 0)</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="em__cmu_8h.html">em_cmu.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="em__assert_8h.html">em_assert.h</a>"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="em__bus_8h.html">em_bus.h</a>"</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">/***************************************************************************/</span>
<a name="l00044"></a>00044 <span class="comment">/***************************************************************************/</span>
<a name="l00051"></a>00051 <span class="comment">/* Fix for errata IDAC_E101 - IDAC output current degradation */</span>
<a name="l00052"></a>00052 <span class="preprocessor">#if defined(_EFM32_ZERO_FAMILY) || defined(_EFM32_HAPPY_FAMILY)</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#define ERRATA_FIX_IDAC_E101_EN</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="comment">/*******************************************************************************</span>
<a name="l00058"></a>00058 <span class="comment"> **************************   GLOBAL FUNCTIONS   *******************************</span>
<a name="l00059"></a>00059 <span class="comment"> ******************************************************************************/</span>
<a name="l00060"></a>00060 <span class="comment">/***************************************************************************/</span>
<a name="l00077"></a><a class="code" href="group__IDAC.html#gd7063a3bf61e7e317fd131637e9323db">00077</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#gd7063a3bf61e7e317fd131637e9323db">IDAC_Init</a>(IDAC_TypeDef *idac, <span class="keyword">const</span> <a class="code" href="structIDAC__Init__TypeDef.html">IDAC_Init_TypeDef</a> *init)
<a name="l00078"></a>00078 {
<a name="l00079"></a>00079   uint32_t tmp;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00082"></a>00082 
<a name="l00083"></a>00083   tmp = (uint32_t)(init-&gt;<a class="code" href="structIDAC__Init__TypeDef.html#bc4b4e2a4e082ce5521ed3234915f41b">prsSel</a>);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   tmp |= init-&gt;<a class="code" href="structIDAC__Init__TypeDef.html#73024982aa23263a084b0fada9ced096">outMode</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   <span class="keywordflow">if</span> (init-&gt;<a class="code" href="structIDAC__Init__TypeDef.html#93edbfe8f59f54a35590af2ab81e1ea8">enable</a>)
<a name="l00088"></a>00088   {
<a name="l00089"></a>00089     tmp |= IDAC_CTRL_EN;
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091   <span class="keywordflow">if</span> (init-&gt;<a class="code" href="structIDAC__Init__TypeDef.html#805d9bdc35649adb68f92aec1cfb0ed6">prsEnable</a>)
<a name="l00092"></a>00092   {
<a name="l00093"></a>00093     tmp |= IDAC_CTRL_OUTENPRS;
<a name="l00094"></a>00094   }
<a name="l00095"></a>00095   <span class="keywordflow">if</span> (init-&gt;<a class="code" href="structIDAC__Init__TypeDef.html#71636ca5f44b3524b93873a1e65ac611">sinkEnable</a>)
<a name="l00096"></a>00096   {
<a name="l00097"></a>00097     tmp |= IDAC_CTRL_CURSINK;
<a name="l00098"></a>00098   }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   idac-&gt;CTRL = tmp;
<a name="l00101"></a>00101 }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="comment">/***************************************************************************/</span>
<a name="l00114"></a><a class="code" href="group__IDAC.html#gee730488249cae5faac6be865dab9a33">00114</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#gee730488249cae5faac6be865dab9a33">IDAC_Enable</a>(IDAC_TypeDef *idac, <span class="keywordtype">bool</span> enable)
<a name="l00115"></a>00115 {
<a name="l00116"></a>00116   <span class="keyword">volatile</span> uint32_t *reg;
<a name="l00117"></a>00117 
<a name="l00118"></a>00118   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   reg = &amp;(idac-&gt;CTRL);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <a class="code" href="group__BUS.html#gf8574f14855448ecae32c5a9dd0c7164">BUS_RegBitWrite</a>(reg, _IDAC_CTRL_EN_SHIFT, enable);
<a name="l00123"></a>00123 }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="comment">/***************************************************************************/</span>
<a name="l00133"></a><a class="code" href="group__IDAC.html#gc9e6f391f96c4d08378bec18e8bd4e4e">00133</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#gc9e6f391f96c4d08378bec18e8bd4e4e">IDAC_Reset</a>(IDAC_TypeDef *idac)
<a name="l00134"></a>00134 {
<a name="l00135"></a>00135   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="preprocessor">#if defined(ERRATA_FIX_IDAC_E101_EN)</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span>  <span class="comment">/* Fix for errata IDAC_E101 - IDAC output current degradation:</span>
<a name="l00139"></a>00139 <span class="comment">     Instead of disabling it we will put it in it's lowest power state (50 nA)</span>
<a name="l00140"></a>00140 <span class="comment">     to avoid degradation over time */</span>
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   <span class="comment">/* Make sure IDAC is enabled with disabled output */</span>
<a name="l00143"></a>00143   idac-&gt;CTRL = _IDAC_CTRL_RESETVALUE | IDAC_CTRL_EN;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="comment">/* Set lowest current (50 nA) */</span>
<a name="l00146"></a>00146   idac-&gt;CURPROG = IDAC_CURPROG_RANGESEL_RANGE0 |
<a name="l00147"></a>00147                   (0x0 &lt;&lt; _IDAC_CURPROG_STEPSEL_SHIFT);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   <span class="comment">/* Enable duty-cycling for all energy modes */</span>
<a name="l00150"></a>00150   idac-&gt;DUTYCONFIG = IDAC_DUTYCONFIG_DUTYCYCLEEN;
<a name="l00151"></a>00151 <span class="preprocessor">#else</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>  idac-&gt;CTRL       = _IDAC_CTRL_RESETVALUE;
<a name="l00153"></a>00153   idac-&gt;CURPROG    = _IDAC_CURPROG_RESETVALUE;
<a name="l00154"></a>00154   idac-&gt;DUTYCONFIG = _IDAC_DUTYCONFIG_RESETVALUE;
<a name="l00155"></a>00155 <span class="preprocessor">#endif</span>
<a name="l00156"></a>00156 <span class="preprocessor"></span><span class="preprocessor">#if defined ( _IDAC_CAL_MASK )</span>
<a name="l00157"></a>00157 <span class="preprocessor"></span>  idac-&gt;CAL        = _IDAC_CAL_RESETVALUE;
<a name="l00158"></a>00158 <span class="preprocessor">#endif</span>
<a name="l00159"></a>00159 <span class="preprocessor"></span>}
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="comment">/***************************************************************************/</span>
<a name="l00172"></a><a class="code" href="group__IDAC.html#g6d5eba9c5497b56265fed7918daf97cd">00172</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#g6d5eba9c5497b56265fed7918daf97cd">IDAC_MinimalOutputTransitionMode</a>(IDAC_TypeDef *idac, <span class="keywordtype">bool</span> enable)
<a name="l00173"></a>00173 {
<a name="l00174"></a>00174   <span class="keyword">volatile</span> uint32_t *reg;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   reg = &amp;(idac-&gt;CTRL);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   <a class="code" href="group__BUS.html#gf8574f14855448ecae32c5a9dd0c7164">BUS_RegBitWrite</a>(reg, _IDAC_CTRL_MINOUTTRANS_SHIFT, enable);
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="comment">/***************************************************************************/</span>
<a name="l00200"></a><a class="code" href="group__IDAC.html#gfd18f64494187e3a438e2db1f1d89dc7">00200</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#gfd18f64494187e3a438e2db1f1d89dc7">IDAC_RangeSet</a>(IDAC_TypeDef *idac, <span class="keyword">const</span> <a class="code" href="group__IDAC.html#g7ff0d5acba93b8f7b3111bfdf094fcee">IDAC_Range_TypeDef</a> range)
<a name="l00201"></a>00201 {
<a name="l00202"></a>00202   uint32_t tmp;
<a name="l00203"></a>00203 <span class="preprocessor">#if defined( _IDAC_CURPROG_TUNING_MASK )</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>  uint32_t diCal0;
<a name="l00205"></a>00205   uint32_t diCal1;
<a name="l00206"></a>00206 <span class="preprocessor">#endif</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span>
<a name="l00208"></a>00208   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00209"></a>00209   EFM_ASSERT(((uint32_t)range &gt;&gt; _IDAC_CURPROG_RANGESEL_SHIFT)
<a name="l00210"></a>00210              &lt;= (_IDAC_CURPROG_RANGESEL_MASK &gt;&gt; _IDAC_CURPROG_RANGESEL_SHIFT));
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="preprocessor">#if defined ( _IDAC_CAL_MASK )</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>
<a name="l00214"></a>00214   <span class="comment">/* Load proper calibration data depending on selected range */</span>
<a name="l00215"></a>00215   <span class="keywordflow">switch</span> ((<a class="code" href="group__IDAC.html#g7ff0d5acba93b8f7b3111bfdf094fcee">IDAC_Range_TypeDef</a>)range)
<a name="l00216"></a>00216   {
<a name="l00217"></a>00217     <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee4b324a0fc5a523a21afea99cdacaaa35">idacCurrentRange0</a>:
<a name="l00218"></a>00218       idac-&gt;CAL = (DEVINFO-&gt;IDAC0CAL0 &amp; _DEVINFO_IDAC0CAL0_RANGE0_MASK)
<a name="l00219"></a>00219                   &gt;&gt; _DEVINFO_IDAC0CAL0_RANGE0_SHIFT;
<a name="l00220"></a>00220       <span class="keywordflow">break</span>;
<a name="l00221"></a>00221     <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee0fcfdc435139852d445ab99828b5f880">idacCurrentRange1</a>:
<a name="l00222"></a>00222       idac-&gt;CAL = (DEVINFO-&gt;IDAC0CAL0 &amp; _DEVINFO_IDAC0CAL0_RANGE1_MASK)
<a name="l00223"></a>00223                   &gt;&gt; _DEVINFO_IDAC0CAL0_RANGE1_SHIFT;
<a name="l00224"></a>00224       <span class="keywordflow">break</span>;
<a name="l00225"></a>00225     <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee3c5bf2f19a5cfa36ffe04edadb873e3e">idacCurrentRange2</a>:
<a name="l00226"></a>00226       idac-&gt;CAL = (DEVINFO-&gt;IDAC0CAL0 &amp; _DEVINFO_IDAC0CAL0_RANGE2_MASK)
<a name="l00227"></a>00227                   &gt;&gt; _DEVINFO_IDAC0CAL0_RANGE2_SHIFT;
<a name="l00228"></a>00228       <span class="keywordflow">break</span>;
<a name="l00229"></a>00229     <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee30f6b9ec7e298feda818357c65f1950a">idacCurrentRange3</a>:
<a name="l00230"></a>00230       idac-&gt;CAL = (DEVINFO-&gt;IDAC0CAL0 &amp; _DEVINFO_IDAC0CAL0_RANGE3_MASK)
<a name="l00231"></a>00231                   &gt;&gt; _DEVINFO_IDAC0CAL0_RANGE3_SHIFT;
<a name="l00232"></a>00232       <span class="keywordflow">break</span>;
<a name="l00233"></a>00233   }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   tmp  = idac-&gt;CURPROG &amp; ~_IDAC_CURPROG_RANGESEL_MASK;
<a name="l00236"></a>00236   tmp |= (uint32_t)range;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 <span class="preprocessor">#elif defined( _IDAC_CURPROG_TUNING_MASK )</span>
<a name="l00239"></a>00239 <span class="preprocessor"></span>
<a name="l00240"></a>00240   <span class="comment">/* Load calibration data depending on selected range and sink/source mode */</span>
<a name="l00241"></a>00241   <span class="comment">/* TUNING (calibration) field in CURPROG register. */</span>
<a name="l00242"></a>00242   <span class="keywordflow">if</span> (idac == IDAC0)
<a name="l00243"></a>00243   {
<a name="l00244"></a>00244     diCal0 = DEVINFO-&gt;IDAC0CAL0;
<a name="l00245"></a>00245     diCal1 = DEVINFO-&gt;IDAC0CAL1;
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247   <span class="keywordflow">else</span>
<a name="l00248"></a>00248   {
<a name="l00249"></a>00249     EFM_ASSERT(<span class="keyword">false</span>);
<a name="l00250"></a>00250   }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   tmp = idac-&gt;CURPROG &amp; ~(_IDAC_CURPROG_TUNING_MASK
<a name="l00253"></a>00253                           | _IDAC_CURPROG_RANGESEL_MASK);
<a name="l00254"></a>00254   <span class="keywordflow">if</span> (idac-&gt;CTRL &amp; IDAC_CTRL_CURSINK)
<a name="l00255"></a>00255   {
<a name="l00256"></a>00256     <span class="keywordflow">switch</span> (range)
<a name="l00257"></a>00257     {
<a name="l00258"></a>00258       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee4b324a0fc5a523a21afea99cdacaaa35">idacCurrentRange0</a>:
<a name="l00259"></a>00259         tmp |= ((diCal1 &amp; _DEVINFO_IDAC0CAL1_SINKRANGE0TUNING_MASK)
<a name="l00260"></a>00260                 &gt;&gt; _DEVINFO_IDAC0CAL1_SINKRANGE0TUNING_SHIFT)
<a name="l00261"></a>00261                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00262"></a>00262         <span class="keywordflow">break</span>;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee0fcfdc435139852d445ab99828b5f880">idacCurrentRange1</a>:
<a name="l00265"></a>00265         tmp |= ((diCal1 &amp; _DEVINFO_IDAC0CAL1_SINKRANGE1TUNING_MASK)
<a name="l00266"></a>00266                 &gt;&gt; _DEVINFO_IDAC0CAL1_SINKRANGE1TUNING_SHIFT)
<a name="l00267"></a>00267                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00268"></a>00268         <span class="keywordflow">break</span>;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee3c5bf2f19a5cfa36ffe04edadb873e3e">idacCurrentRange2</a>:
<a name="l00271"></a>00271         tmp |= ((diCal1 &amp; _DEVINFO_IDAC0CAL1_SINKRANGE2TUNING_MASK)
<a name="l00272"></a>00272                 &gt;&gt; _DEVINFO_IDAC0CAL1_SINKRANGE2TUNING_SHIFT)
<a name="l00273"></a>00273                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00274"></a>00274         <span class="keywordflow">break</span>;
<a name="l00275"></a>00275 
<a name="l00276"></a>00276       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee30f6b9ec7e298feda818357c65f1950a">idacCurrentRange3</a>:
<a name="l00277"></a>00277         tmp |= ((diCal1 &amp; _DEVINFO_IDAC0CAL1_SINKRANGE3TUNING_MASK)
<a name="l00278"></a>00278                 &gt;&gt; _DEVINFO_IDAC0CAL1_SINKRANGE3TUNING_SHIFT)
<a name="l00279"></a>00279                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00280"></a>00280         <span class="keywordflow">break</span>;
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282   }
<a name="l00283"></a>00283   <span class="keywordflow">else</span>
<a name="l00284"></a>00284   {
<a name="l00285"></a>00285     <span class="keywordflow">switch</span> (range)
<a name="l00286"></a>00286     {
<a name="l00287"></a>00287       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee4b324a0fc5a523a21afea99cdacaaa35">idacCurrentRange0</a>:
<a name="l00288"></a>00288         tmp |= ((diCal0 &amp; _DEVINFO_IDAC0CAL0_SOURCERANGE0TUNING_MASK)
<a name="l00289"></a>00289                 &gt;&gt; _DEVINFO_IDAC0CAL0_SOURCERANGE0TUNING_SHIFT)
<a name="l00290"></a>00290                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00291"></a>00291         <span class="keywordflow">break</span>;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee0fcfdc435139852d445ab99828b5f880">idacCurrentRange1</a>:
<a name="l00294"></a>00294         tmp |= ((diCal0 &amp; _DEVINFO_IDAC0CAL0_SOURCERANGE1TUNING_MASK)
<a name="l00295"></a>00295                 &gt;&gt; _DEVINFO_IDAC0CAL0_SOURCERANGE1TUNING_SHIFT)
<a name="l00296"></a>00296                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00297"></a>00297         <span class="keywordflow">break</span>;
<a name="l00298"></a>00298 
<a name="l00299"></a>00299       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee3c5bf2f19a5cfa36ffe04edadb873e3e">idacCurrentRange2</a>:
<a name="l00300"></a>00300         tmp |= ((diCal0 &amp; _DEVINFO_IDAC0CAL0_SOURCERANGE2TUNING_MASK)
<a name="l00301"></a>00301                 &gt;&gt; _DEVINFO_IDAC0CAL0_SOURCERANGE2TUNING_SHIFT)
<a name="l00302"></a>00302                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00303"></a>00303         <span class="keywordflow">break</span>;
<a name="l00304"></a>00304 
<a name="l00305"></a>00305       <span class="keywordflow">case</span> <a class="code" href="group__IDAC.html#gg7ff0d5acba93b8f7b3111bfdf094fcee30f6b9ec7e298feda818357c65f1950a">idacCurrentRange3</a>:
<a name="l00306"></a>00306         tmp |= ((diCal0 &amp; _DEVINFO_IDAC0CAL0_SOURCERANGE3TUNING_MASK)
<a name="l00307"></a>00307                 &gt;&gt; _DEVINFO_IDAC0CAL0_SOURCERANGE3TUNING_SHIFT)
<a name="l00308"></a>00308                &lt;&lt; _IDAC_CURPROG_TUNING_SHIFT;
<a name="l00309"></a>00309         <span class="keywordflow">break</span>;
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   tmp |= (uint32_t)range;
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 <span class="preprocessor">#else</span>
<a name="l00316"></a>00316 <span class="preprocessor"></span><span class="preprocessor">#warning "IDAC calibration register definition unknown."</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00318"></a>00318 <span class="preprocessor"></span>
<a name="l00319"></a>00319   idac-&gt;CURPROG = tmp;
<a name="l00320"></a>00320 }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 <span class="comment">/***************************************************************************/</span>
<a name="l00333"></a><a class="code" href="group__IDAC.html#gd246741d61cb9e83bb73650267b9dfc6">00333</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#gd246741d61cb9e83bb73650267b9dfc6">IDAC_StepSet</a>(IDAC_TypeDef *idac, <span class="keyword">const</span> uint32_t step)
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335   uint32_t tmp;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00338"></a>00338   EFM_ASSERT(step &lt;= (_IDAC_CURPROG_STEPSEL_MASK &gt;&gt; _IDAC_CURPROG_STEPSEL_SHIFT));
<a name="l00339"></a>00339 
<a name="l00340"></a>00340   tmp  = idac-&gt;CURPROG &amp; ~_IDAC_CURPROG_STEPSEL_MASK;
<a name="l00341"></a>00341   tmp |= step &lt;&lt; _IDAC_CURPROG_STEPSEL_SHIFT;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   idac-&gt;CURPROG = tmp;
<a name="l00344"></a>00344 }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 <span class="comment">/***************************************************************************/</span>
<a name="l00357"></a><a class="code" href="group__IDAC.html#gdb7157da10f33ecceb87bad6cc753df3">00357</a> <span class="keywordtype">void</span> <a class="code" href="group__IDAC.html#gdb7157da10f33ecceb87bad6cc753df3">IDAC_OutEnable</a>(IDAC_TypeDef *idac, <span class="keywordtype">bool</span> enable)
<a name="l00358"></a>00358 {
<a name="l00359"></a>00359   <span class="keyword">volatile</span> uint32_t *reg;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361   EFM_ASSERT(IDAC_REF_VALID(idac));
<a name="l00362"></a>00362 
<a name="l00363"></a>00363   reg = &amp;(idac-&gt;CTRL);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365   <a class="code" href="group__BUS.html#gf8574f14855448ecae32c5a9dd0c7164">BUS_RegBitWrite</a>(reg, _IDAC_CTRL_OUTEN_SHIFT, enable);
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 
<a name="l00372"></a>00372 <span class="preprocessor">#endif </span><span class="comment">/* defined(IDAC_COUNT) &amp;&amp; (IDAC_COUNT &gt; 0) */</span>
</pre></div><div id="footer">
<hr size="1"><address style="text-align: right;"><small>
Generated on Thu Sep 10 11:31:04 2015</small> for Silicon Labs EFM32 emlib Peripheral Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a><small> 1.4.7 </small></address></div>
</body>
</html>
