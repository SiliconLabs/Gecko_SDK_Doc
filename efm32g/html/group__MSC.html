<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>EFM32 Gecko Software Documentation: MSC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EFM32 Gecko Software Documentation
   &#160;<span id="projectnumber">efm32g-doc-4.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="../../index.html"><span>Documentation&#160;Home</span></a></li>
      <li><a href="http://www.silabs.com"><span>silabs.com</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__MSC.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MSC<div class="ingroups"><a class="el" href="group__emlib.html">EMLIB</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Flash controller (MSC) Peripheral API. </p>
<p>This module contains functions to control the MSC peripheral of Silicon Labs 32-bit MCUs and SoCs. The user can perform Flash memory read and write operations through the Memory System Controller. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMSC__ExecConfig__TypeDef.html">MSC_ExecConfig_TypeDef</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1135aa8aedb12568145f653bc8abdc31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#ga1135aa8aedb12568145f653bc8abdc31">EM_MSC_RUN_FROM_FLASH</a></td></tr>
<tr class="memdesc:ga1135aa8aedb12568145f653bc8abdc31"><td class="mdescLeft">&#160;</td><td class="mdescRight">By compiling with the define EM_MSC_RUN_FROM_FLASH, the functions performing erase or write operations will remain in and execute from Flash. This is useful for targets that don't want to allocate RAM space to hold the flash functions. Without this define, code for Flash operations will be copied into RAM at startup.  <a href="#ga1135aa8aedb12568145f653bc8abdc31">More...</a><br /></td></tr>
<tr class="separator:ga1135aa8aedb12568145f653bc8abdc31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae0b31656af85df71ad9ec519d7b1c923"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gae0b31656af85df71ad9ec519d7b1c923">MSC_EXECCONFIG_DEFAULT</a></td></tr>
<tr class="separator:gae0b31656af85df71ad9ec519d7b1c923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ccebeae7857abb74bd22341b7761583"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#ga2ccebeae7857abb74bd22341b7761583">MSC_PROGRAM_TIMEOUT</a>&#160;&#160;&#160;10000000ul</td></tr>
<tr class="memdesc:ga2ccebeae7857abb74bd22341b7761583"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timeout used while waiting for the flash to become ready after a write. This number indicates the number of iterations to perform before issuing a timeout.  <a href="#ga2ccebeae7857abb74bd22341b7761583">More...</a><br /></td></tr>
<tr class="separator:ga2ccebeae7857abb74bd22341b7761583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2dd6e97914fb97828408b0dd5069deaa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2dd6e97914fb97828408b0dd5069deaa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MSC_RAMFUNC_DECLARATOR</b></td></tr>
<tr class="separator:ga2dd6e97914fb97828408b0dd5069deaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb4f9fbaaf4d586c394bbefe0a77afed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafb4f9fbaaf4d586c394bbefe0a77afed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MSC_RAMFUNC_DEFINITION_BEGIN</b></td></tr>
<tr class="separator:gafb4f9fbaaf4d586c394bbefe0a77afed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78d9074971767d304eed774cd2c5c806"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga78d9074971767d304eed774cd2c5c806"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MSC_RAMFUNC_DEFINITION_END</b></td></tr>
<tr class="separator:ga78d9074971767d304eed774cd2c5c806"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaa548bd1d520a543e249b6a85338b59c0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a> { <br />
&#160;&#160;<a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a1194171cf80ee1904596c838b67bf8dc">mscReturnOk</a> = 0, 
<br />
&#160;&#160;<a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a9e4a7b0e66a5e0ce269c24448ad53ce9">mscReturnInvalidAddr</a> = -1, 
<br />
&#160;&#160;<a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a6665fd5d688be1ae3622da00e3c44e80">mscReturnLocked</a> = -2, 
<br />
&#160;&#160;<a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a60b2f4d7977d34fde474915d77a86e82">mscReturnTimeOut</a> = -3, 
<br />
&#160;&#160;<a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a2cd0f16db1ef497f581731cb74bc2bfc">mscReturnUnaligned</a> = -4
<br />
 }<tr class="separator:gaa548bd1d520a543e249b6a85338b59c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadb2eab07fedfb79fba5a3abdd8b5c96a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadb2eab07fedfb79fba5a3abdd8b5c96a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gadb2eab07fedfb79fba5a3abdd8b5c96a">MSC_Deinit</a> (void)</td></tr>
<tr class="memdesc:gadb2eab07fedfb79fba5a3abdd8b5c96a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the flash controller for writing. <br /></td></tr>
<tr class="separator:gadb2eab07fedfb79fba5a3abdd8b5c96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadda32c196889602693a0c178da83a1f9"><td class="memItemLeft" align="right" valign="top">MSC_RAMFUNC_DECLARATOR <a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gadda32c196889602693a0c178da83a1f9">MSC_ErasePage</a> (uint32_t *startAddress)</td></tr>
<tr class="memdesc:gadda32c196889602693a0c178da83a1f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases a page in flash memory.  <a href="#gadda32c196889602693a0c178da83a1f9">More...</a><br /></td></tr>
<tr class="separator:gadda32c196889602693a0c178da83a1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa02df815c14caedbc2fd0a8910d2e055"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gaa02df815c14caedbc2fd0a8910d2e055">MSC_Init</a> (void)</td></tr>
<tr class="memdesc:gaa02df815c14caedbc2fd0a8910d2e055"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the flash controller for writing.  <a href="#gaa02df815c14caedbc2fd0a8910d2e055">More...</a><br /></td></tr>
<tr class="separator:gaa02df815c14caedbc2fd0a8910d2e055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e99a1115d2fdec306e3ebd3a9c5e3b4"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#ga3e99a1115d2fdec306e3ebd3a9c5e3b4">MSC_IntClear</a> (uint32_t flags)</td></tr>
<tr class="memdesc:ga3e99a1115d2fdec306e3ebd3a9c5e3b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear one or more pending MSC interrupts.  <a href="#ga3e99a1115d2fdec306e3ebd3a9c5e3b4">More...</a><br /></td></tr>
<tr class="separator:ga3e99a1115d2fdec306e3ebd3a9c5e3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae93719c876be33cc035e8a4791c4c9fe"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gae93719c876be33cc035e8a4791c4c9fe">MSC_IntDisable</a> (uint32_t flags)</td></tr>
<tr class="memdesc:gae93719c876be33cc035e8a4791c4c9fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable one or more MSC interrupts.  <a href="#gae93719c876be33cc035e8a4791c4c9fe">More...</a><br /></td></tr>
<tr class="separator:gae93719c876be33cc035e8a4791c4c9fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4824f067a4895d743b9d369b2d261e1c"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#ga4824f067a4895d743b9d369b2d261e1c">MSC_IntEnable</a> (uint32_t flags)</td></tr>
<tr class="memdesc:ga4824f067a4895d743b9d369b2d261e1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable one or more MSC interrupts.  <a href="#ga4824f067a4895d743b9d369b2d261e1c">More...</a><br /></td></tr>
<tr class="separator:ga4824f067a4895d743b9d369b2d261e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8463b277bec80606e0eb8fe71641f78"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gae8463b277bec80606e0eb8fe71641f78">MSC_IntGet</a> (void)</td></tr>
<tr class="memdesc:gae8463b277bec80606e0eb8fe71641f78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get pending MSC interrupt flags.  <a href="#gae8463b277bec80606e0eb8fe71641f78">More...</a><br /></td></tr>
<tr class="separator:gae8463b277bec80606e0eb8fe71641f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30acc1e5a9cbe04debbc18e40f95ee65"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#ga30acc1e5a9cbe04debbc18e40f95ee65">MSC_IntGetEnabled</a> (void)</td></tr>
<tr class="memdesc:ga30acc1e5a9cbe04debbc18e40f95ee65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get enabled and pending MSC interrupt flags. Useful for handling more interrupt sources in the same interrupt handler.  <a href="#ga30acc1e5a9cbe04debbc18e40f95ee65">More...</a><br /></td></tr>
<tr class="separator:ga30acc1e5a9cbe04debbc18e40f95ee65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0792aa6d5cef984923e3d10d44b5723f"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#ga0792aa6d5cef984923e3d10d44b5723f">MSC_IntSet</a> (uint32_t flags)</td></tr>
<tr class="memdesc:ga0792aa6d5cef984923e3d10d44b5723f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set one or more pending MSC interrupts from SW.  <a href="#ga0792aa6d5cef984923e3d10d44b5723f">More...</a><br /></td></tr>
<tr class="separator:ga0792aa6d5cef984923e3d10d44b5723f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3cda393f9f4def6df58a6b3c2301965"><td class="memItemLeft" align="right" valign="top">MSC_RAMFUNC_DECLARATOR <a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MSC.html#gaf3cda393f9f4def6df58a6b3c2301965">MSC_WriteWord</a> (uint32_t *address, void const *data, uint32_t numBytes)</td></tr>
<tr class="memdesc:gaf3cda393f9f4def6df58a6b3c2301965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to flash memory. This function is interrupt safe, but slower than MSC_WriteWordFast(), which writes to flash with interrupts disabled. Write data must be aligned to words and contain a number of bytes that is divisable by four.  <a href="#gaf3cda393f9f4def6df58a6b3c2301965">More...</a><br /></td></tr>
<tr class="separator:gaf3cda393f9f4def6df58a6b3c2301965"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga1135aa8aedb12568145f653bc8abdc31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EM_MSC_RUN_FROM_FLASH</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>By compiling with the define EM_MSC_RUN_FROM_FLASH, the functions performing erase or write operations will remain in and execute from Flash. This is useful for targets that don't want to allocate RAM space to hold the flash functions. Without this define, code for Flash operations will be copied into RAM at startup. </p>
<dl class="section note"><dt>Note</dt><dd>This define is not present by default. The MSC controller API will run from RAM by default. </dd></dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00087">87</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae0b31656af85df71ad9ec519d7b1c923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSC_EXECCONFIG_DEFAULT</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                               \</div>
<div class="line">  false,                        \</div>
<div class="line">  true,                         \</div>
<div class="line">  false,                        \</div>
<div class="line">  false,                        \</div>
<div class="line">  false,                        \</div>
<div class="line">  false,                        \</div>
<div class="line">}</div>
</div><!-- fragment --><p>Default MSC ExecConfig initialization </p>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00128">128</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2ccebeae7857abb74bd22341b7761583"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSC_PROGRAM_TIMEOUT&#160;&#160;&#160;10000000ul</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The timeout used while waiting for the flash to become ready after a write. This number indicates the number of iterations to perform before issuing a timeout. </p>
<dl class="section note"><dt>Note</dt><dd>This timeout is set very large (in the order of 100x longer than necessary). This is to avoid any corner cases. </dd></dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00072">72</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>Referenced by <a class="el" href="group__MSC.html#gadda32c196889602693a0c178da83a1f9">MSC_ErasePage()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gaa548bd1d520a543e249b6a85338b59c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return codes for writing/erasing the flash </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggaa548bd1d520a543e249b6a85338b59c0a1194171cf80ee1904596c838b67bf8dc"></a>mscReturnOk&#160;</td><td class="fielddoc">
<p>Flash write/erase successful. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaa548bd1d520a543e249b6a85338b59c0a9e4a7b0e66a5e0ce269c24448ad53ce9"></a>mscReturnInvalidAddr&#160;</td><td class="fielddoc">
<p>Invalid address. Write to an address that is not flash. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaa548bd1d520a543e249b6a85338b59c0a6665fd5d688be1ae3622da00e3c44e80"></a>mscReturnLocked&#160;</td><td class="fielddoc">
<p>Flash address is locked. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaa548bd1d520a543e249b6a85338b59c0a60b2f4d7977d34fde474915d77a86e82"></a>mscReturnTimeOut&#160;</td><td class="fielddoc">
<p>Timeout while writing to flash. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaa548bd1d520a543e249b6a85338b59c0a2cd0f16db1ef497f581731cb74bc2bfc"></a>mscReturnUnaligned&#160;</td><td class="fielddoc">
<p>Unaligned access to flash. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00095">95</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gadda32c196889602693a0c178da83a1f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MSC_RAMFUNC_DEFINITION_BEGIN <a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a> MSC_ErasePage </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>startAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erases a page in flash memory. </p>
<dl class="section note"><dt>Note</dt><dd>It is recommended to run this code from RAM. On the Gecko family, it is required to run this function from RAM.</dd></dl>
<p>For IAR, Rowley, SimplicityStudio, Atollic and armgcc this will be achieved automatically by using attributes in the function proctype. For Keil uVision you must define a section called "ram_code" and place this manually in your project's scatter file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startAddress</td><td>Pointer to the flash page to erase. Must be aligned to beginning of page boundary. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the status of erase operation, <a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a> <pre class="fragment">*   mscReturnOk - Operation completed successfully.
*   mscReturnInvalidAddr - Operation tried to erase a non-flash area.
*   mscReturnLocked - Operation tried to erase a locked area of the flash.
*   mscReturnTimeOut - Operation timed out waiting for flash operation
*       to complete.
* </pre> </dd></dl>

<p>Definition at line <a class="el" href="em__msc_8c_source.html#l00705">705</a> of file <a class="el" href="em__msc_8c_source.html">em_msc.c</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Part.html#ga4cc14e2c99ae7f8e5a8e371d03c8532c">FLASH_PAGE_SIZE</a>, <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>, <a class="el" href="group__MSC.html#ga2ccebeae7857abb74bd22341b7761583">MSC_PROGRAM_TIMEOUT</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#ga31c1ed2af281c2512cd0b377c183dc07">MSC_STATUS_BUSY</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#ga8d3451735f536aa2c6280c02706490ee">MSC_STATUS_INVADDR</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#ga3c7c1f8ca513d0c894605ec9a40425b7">MSC_STATUS_LOCKED</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#gadfd699edb972e148316eda017a387f21">MSC_WRITECMD_ERASEPAGE</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#gae2721c3ba17a6e4c1bfe168e0a5930a5">MSC_WRITECMD_LADDRIM</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#gac87c17fa15d04d4c87446377a57c420d">MSC_WRITECTRL_WREN</a>, <a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a9e4a7b0e66a5e0ce269c24448ad53ce9">mscReturnInvalidAddr</a>, <a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a6665fd5d688be1ae3622da00e3c44e80">mscReturnLocked</a>, <a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a1194171cf80ee1904596c838b67bf8dc">mscReturnOk</a>, and <a class="el" href="group__MSC.html#ggaa548bd1d520a543e249b6a85338b59c0a60b2f4d7977d34fde474915d77a86e82">mscReturnTimeOut</a>.</p>

<p>Referenced by <a class="el" href="group__BSPCOMMON.html#ga5061043f8bb64d1b0130fe4185916916">BSP_TraceProfilerEnable()</a>, and <a class="el" href="nvm__hal_8c.html#aaa2acd545c460f4cea576178fc185a21">NVMHAL_PageErase()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa02df815c14caedbc2fd0a8910d2e055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSC_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables the flash controller for writing. </p>
<dl class="section note"><dt>Note</dt><dd>IMPORTANT: This function must be called before flash operations when AUXHFRCO clock has been changed from default 14MHz band. </dd>
<dd>
This function calls SystemCoreClockGet in order to set the global variable SystemCoreClock which is used in subseqent calls of MSC_WriteWord to make sure the frequency is sufficiently high for flash operations. If the clock frequency is changed then software is responsible for calling MSC_Init or SystemCoreClockGet in order to set the SystemCoreClock variable to the correct value. </dd></dl>

<p>Definition at line <a class="el" href="em__msc_8c_source.html#l00225">225</a> of file <a class="el" href="em__msc_8c_source.html">em_msc.c</a>.</p>

<p>References <a class="el" href="group__CMU.html#gac9aa0ed17f83bd48abcf7b430843374a">CMU_ClockFreqGet()</a>, <a class="el" href="group__CMU.html#gga519ea66a1a21e07f2d1cccc9aa55799eaab68f7d1104c6933fb997f6acbd10f34">cmuClock_AUX</a>, <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>, <a class="el" href="group__EFM32G890F128__UNLOCK.html#ga832b33f7bfa6ee1c9e7ec722aeeb68eb">MSC_UNLOCK_CODE</a>, <a class="el" href="group__EFM32G__MSC__BitFields.html#gac87c17fa15d04d4c87446377a57c420d">MSC_WRITECTRL_WREN</a>, and <a class="el" href="system__efm32g_8c.html#af2e6aa1120f0e55e38c83d8387625d16">SystemCoreClockGet()</a>.</p>

<p>Referenced by <a class="el" href="group__BSPCOMMON.html#ga5061043f8bb64d1b0130fe4185916916">BSP_TraceProfilerEnable()</a>, and <a class="el" href="nvm__hal_8c.html#a67a31b5bf9f6a36a8e67b3d03bf59b38">NVMHAL_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3e99a1115d2fdec306e3ebd3a9c5e3b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE void MSC_IntClear </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear one or more pending MSC interrupts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Pending MSC intterupt source to clear. Use a bitwise logic OR combination of valid interrupt flags for the MSC module (MSC_IF_nnn). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00162">162</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>.</p>

</div>
</div>
<a class="anchor" id="gae93719c876be33cc035e8a4791c4c9fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE void MSC_IntDisable </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable one or more MSC interrupts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>MSC interrupt sources to disable. Use a bitwise logic OR combination of valid interrupt flags for the MSC module (MSC_IF_nnn). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00175">175</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>.</p>

</div>
</div>
<a class="anchor" id="ga4824f067a4895d743b9d369b2d261e1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE void MSC_IntEnable </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable one or more MSC interrupts. </p>
<dl class="section note"><dt>Note</dt><dd>Depending on the use, a pending interrupt may already be set prior to enabling the interrupt. Consider using <a class="el" href="group__MSC.html#ga3e99a1115d2fdec306e3ebd3a9c5e3b4" title="Clear one or more pending MSC interrupts. ">MSC_IntClear()</a> prior to enabling if such a pending interrupt should be ignored.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>MSC interrupt sources to enable. Use a bitwise logic OR combination of valid interrupt flags for the MSC module (MSC_IF_nnn). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00194">194</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>.</p>

</div>
</div>
<a class="anchor" id="gae8463b277bec80606e0eb8fe71641f78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE uint32_t MSC_IntGet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get pending MSC interrupt flags. </p>
<dl class="section note"><dt>Note</dt><dd>The event bits are not cleared by the use of this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>MSC interrupt sources pending. A bitwise logic OR combination of valid interrupt flags for the MSC module (MSC_IF_nnn). </dd></dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00211">211</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>.</p>

</div>
</div>
<a class="anchor" id="ga30acc1e5a9cbe04debbc18e40f95ee65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE uint32_t MSC_IntGetEnabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get enabled and pending MSC interrupt flags. Useful for handling more interrupt sources in the same interrupt handler. </p>
<dl class="section note"><dt>Note</dt><dd>Interrupt flags are not cleared by the use of this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Pending and enabled MSC interrupt sources The return value is the bitwise AND of<ul>
<li>the enabled interrupt sources in MSC_IEN and</li>
<li>the pending interrupt flags MSC_IF </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00231">231</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>.</p>

</div>
</div>
<a class="anchor" id="ga0792aa6d5cef984923e3d10d44b5723f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE void MSC_IntSet </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set one or more pending MSC interrupts from SW. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>MSC interrupt sources to set to pending. Use a bitwise logic OR combination of valid interrupt flags for the MSC module (MSC_IF_nnn). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="em__msc_8h_source.html#l00248">248</a> of file <a class="el" href="em__msc_8h_source.html">em_msc.h</a>.</p>

<p>References <a class="el" href="group__EFM32G890F128__Peripheral__Declaration.html#ga543ff1594e55db162ab50232e7db483e">MSC</a>.</p>

</div>
</div>
<a class="anchor" id="gaf3cda393f9f4def6df58a6b3c2301965"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MSC_RAMFUNC_DEFINITION_END MSC_RAMFUNC_DEFINITION_BEGIN <a class="el" href="group__MSC.html#gaa548bd1d520a543e249b6a85338b59c0">MSC_Status_TypeDef</a> MSC_WriteWord </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to flash memory. This function is interrupt safe, but slower than MSC_WriteWordFast(), which writes to flash with interrupts disabled. Write data must be aligned to words and contain a number of bytes that is divisable by four. </p>
<dl class="section note"><dt>Note</dt><dd>It is recommended to erase the flash page before performing a write.</dd></dl>
<p>It is recommended to run this code from RAM. On the Gecko family, it is required to run this function from RAM.</p>
<p>For IAR, Rowley, SimplicityStudio, Atollic and armgcc this will be achieved automatically by using attributes in the function proctype. For Keil uVision you must define a section called "ram_code" and place this manually in your project's scatter file.</p>
<p>This function requires a system core clock at 1MHz or higher.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Pointer to the flash word to write to. Must be aligned to words. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Data to write to flash. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numBytes</td><td>Number of bytes to write from flash. NB: Must be divisable by four. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the status of the write operation <pre class="fragment">*   flashReturnOk - Operation completed successfully.
*   flashReturnInvalidAddr - Operation tried to erase a non-flash area.
*   flashReturnLocked - Operation tried to erase a locked area of the flash.
*   flashReturnTimeOut - Operation timed out waiting for flash operation
*       to complete. Or the MSC timed out waiting for the software to write
*       the next word into the DWORD register.
* </pre> </dd></dl>

<p>Definition at line <a class="el" href="em__msc_8c_source.html#l00791">791</a> of file <a class="el" href="em__msc_8c_source.html">em_msc.c</a>.</p>

<p>Referenced by <a class="el" href="group__BSPCOMMON.html#ga5061043f8bb64d1b0130fe4185916916">BSP_TraceProfilerEnable()</a>, and <a class="el" href="nvm__hal_8c.html#a0800d58f7bb43d0462592d0062c5cef3">NVMHAL_Write()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Mar 10 2016 14:22:28 for EFM32 Gecko Software Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
